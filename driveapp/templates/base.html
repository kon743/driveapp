<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <!-- block title で、各ページが独自のタイトルを差し込めるようにする -->
    <title>{% block title %}Google Drive Manager{% endblock %}</title>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 0; background-color: #f8f9fa; }
        header { background-color: #343a40; color: white; padding: 1em 2em; display: flex; justify-content: space-between; align-items: center; }
        header a { color: white; text-decoration: none; font-size: 1.2em; }
        .container { margin: 2em; }
        h1, h2 { color: #333; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; background-color: white; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        a.btn-download { background-color: #007bff; color: white; padding: 5px 10px; border-radius: 4px; text-decoration: none; }
        a.btn-download:hover { background-color: #0056b3; }
        .flash { padding: 1em; margin-bottom: 1em; border: 1px solid #ddd; border-radius: 4px; }
        .flash.success { background-color: #d4edda; color: #155724; border-color: #c3e6cb; }
        .flash.error { background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; }
        .search-form { display: flex; }
        .search-form input[type="text"] { padding: 0.5em; border: 1px solid #ccc; border-radius: 4px 0 0 4px; }
        .search-form button { padding: 0.5em 1em; border: none; background-color: #007bff; color: white; border-radius: 0 4px 4px 0; cursor: pointer; }
        .main-nav { margin-left: 2em; }
        .main-nav a { font-size: 1em; margin-right: 1em; }
        .main-nav a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <header>
        <a href="/">Google Drive Manager</a>
                    <nav class="main-nav">
                <a href="/">トップ</a>
                <a href="/files">全ファイル一覧</a>
            </nav>
                <form action="/search" method="get" class="search-form">
            <input type="text" name="query" placeholder="ファイル名を検索..." value="{{ query or '' }}">
            <select name="mimeType">
                <option value="" {% if not mime_type %}selected{% endif %}>すべてのファイルタイプ</option>
                <optgroup label="ドキュメント">
                    <option value="application/pdf" {% if mime_type == 'application/pdf' %}selected{% endif %}>PDF</option>
                    <option value="application/vnd.google-apps.document" {% if mime_type == 'application/vnd.google-apps.document' %}selected{% endif %}>Google ドキュメント</option>
                    <option value="application/msword" {% if mime_type == 'application/msword' %}selected{% endif %}>Word</option>
                </optgroup>
                <optgroup label="スプレッドシート">
                    <option value="application/vnd.google-apps.spreadsheet" {% if mime_type == 'application/vnd.google-apps.spreadsheet' %}selected{% endif %}>Google スプレッドシート</option>
                    <option value="application/vnd.ms-excel" {% if mime_type == 'application/vnd.ms-excel' %}selected{% endif %}>Excel</option>
                </optgroup>
                <optgroup label="画像">
                    <option value="image/jpeg" {% if mime_type == 'image/jpeg' %}selected{% endif %}>JPEG 画像</option>
                    <option value="image/png" {% if mime_type == 'image/png' %}selected{% endif %}>PNG 画像</option>
                </optgroup>
                <optgroup label="その他">
                    <option value="application/vnd.google-apps.folder" {% if mime_type == 'application/vnd.google-apps.folder' %}selected{% endif %}>フォルダ</option>
                </optgroup>
            </select>
            <button type="submit">検索</button>
        </form>
    </header>

    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- block content で、各ページが独自のコンテンツを差し込めるようにする -->
        {% block content %}{% endblock %}
    </div>
</body>
</html>